# 奇怪的知识增加了

## 一、sql中同时使用update、select

### 1、简化版本

```sql
update or_order o1 inner join or_order o2
        on o1.order_code = o2.order_code
set o1.actual_pay_amount = o2.pay_mount;
```

### 2、可以额外使用group by 子句，分组函数

```sql
update or_order o,(
    select o1.order_code,sum(o1.pay_mount) sum
    from or_order o1
    group by order_code
    ) as order_1
set o.actual_pay_amount = order_1.sum
where o.order_code = order_1.order_code;
```

